# 垃圾收集器
> java不像C和C++一样, 需要自己去释放内存,  因为java虚拟机有垃圾收集器, 能在创建对象时分配空间, 对象不用时自己判断是否回收内存, 那么随之而来的就是如果内存出现问题java开发人员排查更加困难

- [ ] 有效对象判断
    - [ ] 引用计数法
- [ ] 垃圾收集算法
- [ ] 垃圾收集器类型
- [ ] 内存的分配和回收

## 有效对象判断
> 用一定的算法来判断对象是否有效, 然后把筛选出来的对象通过垃圾收集器进行一个内存回收

### 引用计数法
这种方式会给每个对象做一个初始的计数值 `0` , 当对象被引用时引用计数器 `+1` , 当变量放弃引用或者被销毁时, 计数器就 `-1`。 当一个对象为 `0` 时则垃圾收集器会对其进行一个内存释放

<div align="center"> <img src="../images/引用计数算法.jpg" /> </div>

**引用计数器**
1. 当引用计数器 `0` 时就可以直接进行内存回收。效率比较高, 没有延迟
2. 需要为每个对象额外添加引用计数器
3. 每次被引用都要改变计数器的数值
4. 最重点的是无法检测出来循环引用问题


**循环引用的案例**

```java {.line-numbers}
public  class CycleReferenceTest {
    private CycleReferenceTest instance;

    public  static void main(String[] args){
        CycleReferenceTest a = new CycleReferenceTest();
        CycleReferenceTest b = new CycleReferenceTest();

        a.instance = b;
        b.instance = a;
    }
}
```

<div align="center"> <img src="../images/引用计数循环问题.jpg" /> </div>











